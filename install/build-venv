#!/bin/sh

if [ "$1" ]; then
  EVA_DIR=$1
  D=`realpath $0`
  MY_DIR=`dirname ${D}`
else
  D=`realpath $0`
  MY_DIR=`dirname ${D}`
  EVA_DIR=${MY_DIR}/..
  cd ${EVA_DIR}
fi

EVA_DIR=`realpath ${EVA_DIR}`

if [ ! -d ${EVA_DIR}/python3 ]; then
  python3 -m venv ${EVA_DIR}/python3 || exit 2
fi

PIP=${EVA_DIR}/python3/bin/pip3

${PIP} install wheel || exit 3
${PIP} install -r ${MY_DIR}/mods.list || exit 3
exit 0
