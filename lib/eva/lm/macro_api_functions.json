{"shared": {"description": "get value of the shared variable", "editable": false, "group": "eva/general", "name": "shared", "type": "built-in", "src": null, "var_in": [{"description": "variable name", "var": "name", "required": true}, {"description": "value if variable doesn't exist", "var": "default", "required": false}], "var_out": []}, "set_shared": {"description": "set value of the shared variable", "editable": false, "group": "eva/general", "name": "set_shared", "type": "built-in", "src": null, "var_in": [{"description": "variable name", "var": "name", "required": true}, {"description": "value to set. If empty, varible is deleted", "var": "value", "required": false}], "var_out": []}, "increment_shared": {"description": "increment value of the shared variable", "editable": false, "group": "eva/general", "name": "increment_shared", "type": "built-in", "src": null, "var_in": [{"description": "variable name", "var": "name", "required": true}], "var_out": []}, "decrement_shared": {"description": "decrement value of the shared variable", "editable": false, "group": "eva/general", "name": "decrement_shared", "type": "built-in", "src": null, "var_in": [{"description": "variable name", "var": "name", "required": true}], "var_out": []}, "mail": {"description": "send email message", "editable": false, "group": "eva/general", "name": "mail", "type": "built-in", "src": null, "var_in": [{"description": "email subject", "var": "subject", "required": false}, {"description": "email text", "var": "text", "required": false}, {"description": "recipient or array of the recipients", "var": "rcp", "required": false}], "var_out": []}, "debug": {"description": "put debug message to log file", "editable": false, "group": "eva/log", "name": "debug", "type": "built-in", "src": null, "var_in": [{"description": "message text", "var": "msg", "required": true}], "var_out": []}, "info": {"description": "put info message to log file", "editable": false, "group": "eva/log", "name": "info", "type": "built-in", "src": null, "var_in": [{"description": "message text", "var": "msg", "required": true}], "var_out": []}, "warning": {"description": "put warning message to log file", "editable": false, "group": "eva/log", "name": "warning", "type": "built-in", "src": null, "var_in": [{"description": "message text", "var": "msg", "required": true}], "var_out": []}, "error": {"description": "put error message to log file", "editable": false, "group": "eva/log", "name": "error", "type": "built-in", "src": null, "var_in": [{"description": "message text", "var": "msg", "required": true}], "var_out": []}, "critical": {"description": "put critical message to log file", "editable": false, "group": "eva/log", "name": "critical", "type": "built-in", "src": null, "var_in": [{"description": "message text", "var": "msg", "required": true}, {"description": "if True, critical event to core is sent (requires send_critical=true in macro props)", "var": "send_event", "required": false}], "var_out": []}, "exit": {"description": "finish macro execution", "editable": false, "group": "eva/general", "name": "exit", "type": "built-in", "src": null, "var_in": [{"description": "macro exit code (default: 0, no errors)", "var": "code", "required": true}], "var_out": []}, "lock": {"description": "acquire lock", "editable": false, "group": "eva/lock", "name": "lock", "type": "built-in", "src": null, "var_in": [{"description": "lock id", "var": "lock_id", "required": true}, {"description": "max timeout to wait", "var": "timeout", "required": false}, {"description": "time after which token is automatically unlocked (if absent, token may be unlocked only via unlock function)", "var": "expires", "required": false}], "var_out": []}, "unlock": {"description": "release lock", "editable": false, "group": "eva/lock", "name": "unlock", "type": "built-in", "src": null, "var_in": [{"description": "lock id", "var": "l", "required": true}], "var_out": []}, "lvar_status": {"description": "get lvar status", "editable": false, "group": "eva/item", "name": "lvar_status", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "lvar_value": {"description": "get lvar value", "editable": false, "group": "eva/item", "name": "lvar_value", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "is_expired": {"description": "is lvar (timer) expired", "editable": false, "group": "eva/lvar", "name": "is_expired", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "unit_status": {"description": "get unit status", "editable": false, "group": "eva/item", "name": "unit_status", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}], "var_out": []}, "unit_value": {"description": "get unit value", "editable": false, "group": "eva/item", "name": "unit_value", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}, {"description": "value if null (default is empty string)", "var": "default", "required": false}], "var_out": []}, "unit_nstatus": {"description": "get unit nstatus", "editable": false, "group": "eva/item", "name": "unit_nstatus", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}], "var_out": []}, "unit_nvalue": {"description": "get unit nvalue", "editable": false, "group": "eva/item", "name": "unit_nvalue", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}], "var_out": []}, "is_busy": {"description": "is unit busy", "editable": false, "group": "eva/unit", "name": "is_busy", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}], "var_out": []}, "sensor_status": {"description": "get sensor status", "editable": false, "group": "eva/item", "name": "sensor_status", "type": "built-in", "src": null, "var_in": [{"description": "sensor id", "var": "sensor_id", "required": true}], "var_out": []}, "sensor_value": {"description": "get sensor value", "editable": false, "group": "eva/item", "name": "sensor_value", "type": "built-in", "src": null, "var_in": [{"description": "sensor id", "var": "sensor_id", "required": true}, {"description": "value if null (default is empty string)", "var": "default", "required": false}], "var_out": []}, "set": {"description": "set lvar value", "editable": false, "group": "eva/lvar", "name": "set", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}, {"description": "lvar value (if not specified, lvar is set to null)", "var": "value", "required": false}], "var_out": []}, "state": {"description": "get item state", "editable": false, "group": "eva/item", "name": "state", "type": "built-in", "src": null, "var_in": [{"description": "item id (oid required)", "var": "item_id", "required": true}], "var_out": [{"description": "", "var": "status"}, {"description": "", "var": "value"}]}, "status": {"description": "get item status", "editable": false, "group": "eva/item", "name": "status", "type": "built-in", "src": null, "var_in": [{"description": "item id (oid required)", "var": "item_id", "required": true}], "var_out": []}, "value": {"description": "get item value", "editable": false, "group": "eva/item", "name": "value", "type": "built-in", "src": null, "var_in": [{"description": "item id (oid required)", "var": "item_id", "required": true}, {"description": "value if null (default is empty string)", "var": "default", "required": false}], "var_out": []}, "reset": {"description": "reset lvar value", "editable": false, "group": "eva/lvar", "name": "reset", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "clear": {"description": "reset lvar value", "editable": false, "group": "eva/lvar", "name": "clear", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "toggle": {"description": "toggle lvar value", "editable": false, "group": "eva/lvar", "name": "toggle", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "increment": {"description": "increment lvar value", "editable": false, "group": "eva/lvar", "name": "increment", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "decrement": {"description": "decrement lvar value", "editable": false, "group": "eva/lvar", "name": "decrement", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}], "var_out": []}, "expires": {"description": "set lvar expiration time", "editable": false, "group": "eva/lvar", "name": "expires", "type": "built-in", "src": null, "var_in": [{"description": "lvar id", "var": "lvar_id", "required": true}, {"description": "time (in seconds), default is 0 (never expires)", "var": "etime", "required": false}], "var_out": []}, "action": {"description": "unit control action", "editable": false, "group": "eva/unit", "name": "action", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}, {"description": "desired unit status", "var": "status", "required": true}, {"description": "desired unit value", "var": "value", "required": false}, {"description": "wait for the completion for the specified number of seconds", "var": "wait", "required": false}, {"description": "action UUID (will be auto generated if none specified)", "var": "uuid", "required": false}, {"description": "queue priority (default is 100, lower is better)", "var": "priority", "required": false}], "var_out": [{"description": "Exit code", "var": "exitcode"}, {"description": "Action status", "var": "status"}]}, "action_toggle": {"description": "toggle unit status", "editable": false, "group": "eva/unit", "name": "action_toggle", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}, {"description": "desired unit value", "var": "value", "required": false}, {"description": "wait for the completion for the specified number of seconds", "var": "wait", "required": false}, {"description": "action UUID (will be auto generated if none specified)", "var": "uuid", "required": false}, {"description": "queue priority (default is 100, lower is better)", "var": "priority", "required": false}], "var_out": [{"description": "Exit code", "var": "exitcode"}, {"description": "Action status", "var": "status"}]}, "result": {"description": "get action status", "editable": false, "group": "eva/unit", "name": "result", "type": "built-in", "src": null, "var_in": [{"description": "unit id or", "var": "unit_id", "required": true}, {"description": "action uuid", "var": "uuid", "required": true}, {"description": "filter by unit group", "var": "group", "required": false}, {"description": "filter by action status: Q for queued, R for running, F for finished", "var": "status", "required": false}], "var_out": [{"description": "Exit code", "var": "exitcode"}, {"description": "Action status", "var": "status"}]}, "start": {"description": "start unit", "editable": false, "group": "eva/unit", "name": "start", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}, {"description": "desired unit value", "var": "value", "required": false}, {"description": "wait for the completion for the specified number of seconds", "var": "wait", "required": false}, {"description": "action UUID (will be auto generated if none specified)", "var": "uuid", "required": false}, {"description": "queue priority (default is 100, lower is better)", "var": "priority", "required": false}], "var_out": [{"description": "Exit code", "var": "exitcode"}, {"description": "Action status", "var": "status"}]}, "stop": {"description": "stop unit", "editable": false, "group": "eva/unit", "name": "stop", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}, {"description": "desired unit value", "var": "value", "required": false}, {"description": "wait for the completion for the specified number of seconds", "var": "wait", "required": false}, {"description": "action UUID (will be auto generated if none specified)", "var": "uuid", "required": false}, {"description": "queue priority (default is 100, lower is better)", "var": "priority", "required": false}], "var_out": [{"description": "Exit code", "var": "exitcode"}, {"description": "Action status", "var": "status"}]}, "terminate": {"description": "terminate action execution", "editable": false, "group": "eva/unit", "name": "terminate", "type": "built-in", "src": null, "var_in": [{"description": "action uuid or", "var": "unit_id", "required": true}, {"description": "unit id", "var": "uuid", "required": true}], "var_out": []}, "q_clean": {"description": "clean action queue of unit", "editable": false, "group": "eva/unit", "name": "q_clean", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}], "var_out": []}, "kill": {"description": "kill unit actions", "editable": false, "group": "eva/unit", "name": "kill", "type": "built-in", "src": null, "var_in": [{"description": "unit id", "var": "unit_id", "required": true}], "var_out": []}, "run": {"description": "execute another macro", "editable": false, "group": "eva/general", "name": "run", "type": "built-in", "src": null, "var_in": [{"description": "macro id", "var": "macro", "required": true}, {"description": "macro arguments, array or space separated", "var": "args", "required": false}, {"description": "macro keyword arguments, name=value, comma separated or dict", "var": "kwargs", "required": false}, {"description": "wait for the completion for the specified number of seconds", "var": "wait", "required": false}, {"description": "action UUID (will be auto generated if none specified)", "var": "uuid", "required": false}, {"description": "queue priority (default is 100, lower is better)", "var": "priority", "required": false}], "var_out": [{"description": "Exit code", "var": "exitcode"}, {"description": "Action status", "var": "status"}, {"description": "Macro \"out\" variable", "var": "out"}]}, "cmd": {"description": "execute a remote system command", "editable": false, "group": "eva/general", "name": "cmd", "type": "built-in", "src": null, "var_in": [{"description": "controller id to execute command on", "var": "controller_id", "required": true}, {"description": "name of the command script", "var": "command", "required": true}, {"description": "string of command arguments, separated by spaces (passed to the script)", "var": "args", "required": false}, {"description": "wait (in seconds) before API call sends a response. This allows to try waiting until command finish", "var": "wait", "required": false}, {"description": "maximum time of command execution. If the command fails to finish within the specified time (in sec), it will be terminated", "var": "timeout", "required": false}], "var_out": [{"description": "Exit code", "var": "exitcode"}, {"description": "Action status", "var": "status"}]}, "history": {"description": "get item state history", "editable": false, "group": "eva/item", "name": "history", "type": "built-in", "src": null, "var_in": [{"description": "item ID, or multiple IDs (list or comma separated)", "var": "item_id", "required": true}, {"description": "time frame start, ISO or Unix timestamp", "var": "t_start", "required": false}, {"description": "time frame end, optional (default: current time), ISO or Unix timestamp", "var": "t_end", "required": false}, {"description": "limit history records", "var": "limit", "required": false}, {"description": "item property ('status' or 'value'", "var": "prop", "required": false}, {"description": "time format, 'iso' or 'raw' (default) for timestamp", "var": "time_format", "required": false}, {"description": "fill frame with the specified interval (e.g. *1T* - 1 minute, *2H* - 2 hours etc.), optional. If specified, t_start is required", "var": "fill", "required": false}, {"description": "output format, 'list' (default) or 'dict'", "var": "fmt", "required": false}, {"description": ":doc:`notifier</notifiers>` ID which keeps history for the specified item(s) (default: **db_1**)", "var": "db", "required": false}], "var_out": []}, "system": {"description": "execute the command in a subshell", "editable": false, "group": "eva/general", "name": "system", "type": "built-in", "src": null, "var_in": [], "var_out": []}, "ping": {"description": "ping remote host", "editable": false, "group": "eva/general", "name": "ping", "type": "built-in", "src": null, "var_in": [{"description": "host name or IP to ping", "var": "host", "required": true}, {"description": "ping timeout in milliseconds (default: 1000)", "var": "timeout", "required": true}, {"description": "number of packets to send (default: 1)", "var": "count", "required": true}], "var_out": []}, "time": {"description": "current time in seconds since Epoch", "editable": false, "group": "eva/general", "name": "time", "type": "built-in", "src": null, "var_in": [], "var_out": []}, "date": {"description": "date/time", "editable": false, "group": "eva/general", "name": "date", "type": "built-in", "src": null, "var_in": [], "var_out": [{"description": "", "var": "year"}, {"description": "", "var": "month"}, {"description": "", "var": "day"}, {"description": "", "var": "weekday"}, {"description": "", "var": "hour"}, {"description": "", "var": "minute"}, {"description": "", "var": "second"}, {"description": "", "var": "timestamp"}]}, "ls": {"description": "list files in directory", "editable": false, "group": "eva/general", "name": "ls", "type": "built-in", "src": null, "var_in": [{"description": "path and mask (e.g. /opt/data/\\*.jpg)", "var": "mask", "required": true}, {"description": "if True, perform a recursive search", "var": "recursive", "required": true}], "var_out": []}, "open_oldest": {"description": "open oldest file by mask", "editable": false, "group": "eva/general", "name": "open_oldest", "type": "built-in", "src": null, "var_in": [{"description": "path and mask (e.g. /opt/data/\\*.jpg)", "var": "mask", "required": true}, {"description": "file open mode (default: 'r')", "var": "mode", "required": false}], "var_out": []}, "open_newest": {"description": "open newest file by mask", "editable": false, "group": "eva/general", "name": "open_newest", "type": "built-in", "src": null, "var_in": [{"description": "path and mask (e.g. /opt/data/\\*.jpg)", "var": "mask", "required": true}, {"description": "file open mode (default: 'r')", "var": "mode", "required": false}], "var_out": []}, "deploy_device": {"description": "deploy device items from template", "editable": false, "group": "eva/device", "name": "deploy_device", "type": "built-in", "src": null, "var_in": [{"description": "controller id to deploy device on", "var": "controller_id", "required": true}, {"description": "device template (*runtime/tpl/<TEMPLATE>.yml|yaml|json*, without extension)", "var": "device_tpl", "required": true}, {"description": "device config (*var=value*, comma separated or dict)", "var": "cfg", "required": false}, {"description": "save items configuration on disk immediately after operation", "var": "save", "required": false}], "var_out": []}, "update_device": {"description": "update device items config from template", "editable": false, "group": "eva/device", "name": "update_device", "type": "built-in", "src": null, "var_in": [{"description": "controller id to deploy device on", "var": "controller_id", "required": true}, {"description": "device template (*runtime/tpl/<TEMPLATE>.yml|yaml|json*, without extension)", "var": "device_tpl", "required": true}, {"description": "device config (*var=value*, comma separated or dict)", "var": "cfg", "required": false}, {"description": "save items configuration on disk immediately after operation", "var": "save", "required": false}], "var_out": []}, "undeploy_device": {"description": "undeploy device items config from template", "editable": false, "group": "eva/device", "name": "undeploy_device", "type": "built-in", "src": null, "var_in": [{"description": "controller id to deploy device on", "var": "controller_id", "required": true}, {"description": "device template (*runtime/tpl/<TEMPLATE>.yml|yaml|json*, without extension)", "var": "device_tpl", "required": true}, {"description": "device config (*var=value*, comma separated or dict)", "var": "cfg", "required": false}], "var_out": []}, "set_rule_prop": {"description": "set rule prop", "editable": false, "group": "eva/rule", "name": "set_rule_prop", "type": "built-in", "src": null, "var_in": [{"description": "rule id (uuid)", "var": "rule_id", "required": true}, {"description": "property to set", "var": "prop", "required": true}, {"description": "value to set", "var": "value", "required": true}, {"description": "save rule config after the operation", "var": "save", "required": false}], "var_out": []}, "set_job_prop": {"description": "set job prop", "editable": false, "group": "eva/job", "name": "set_job_prop", "type": "built-in", "src": null, "var_in": [{"description": "job id (uuid)", "var": "job_id", "required": true}, {"description": "property to set", "var": "prop", "required": true}, {"description": "value to set", "var": "value", "required": true}, {"description": "save job config after the operation", "var": "save", "required": false}], "var_out": []}, "start_cycle": {"description": "start cycle", "editable": false, "group": "eva/cycle", "name": "start_cycle", "type": "built-in", "src": null, "var_in": [{"description": "cycle id", "var": "cycle_id", "required": true}], "var_out": []}, "stop_cycle": {"description": "stop cycle", "editable": false, "group": "eva/cycle", "name": "stop_cycle", "type": "built-in", "src": null, "var_in": [{"description": "cycle id", "var": "cycle_id", "required": true}, {"description": "wait for cycle stop (default is False)", "var": "wait", "required": false}], "var_out": []}, "reset_cycle_stats": {"description": "reset cycle stats", "editable": false, "group": "eva/cycle", "name": "reset_cycle_stats", "type": "built-in", "src": null, "var_in": [{"description": "cycle id", "var": "cycle_id", "required": true}], "var_out": []}, "list_cycle_props": {"description": "list cycle props", "editable": false, "group": "eva/cycle", "name": "list_cycle_props", "type": "built-in", "src": null, "var_in": [{"description": "cycle id", "var": "cycle_id", "required": true}], "var_out": []}, "set_cycle_prop": {"description": "set cycle prop", "editable": false, "group": "eva/cycle", "name": "set_cycle_prop", "type": "built-in", "src": null, "var_in": [{"description": "cycle id", "var": "cycle_id", "required": true}, {"description": "property to set", "var": "prop", "required": true}, {"description": "value to set", "var": "value", "required": true}, {"description": "save cycle config after the operation", "var": "save", "required": false}], "var_out": []}, "get_cycle_info": {"description": "get cycle information", "editable": false, "group": "eva/cycle", "name": "get_cycle_info", "type": "built-in", "src": null, "var_in": [{"description": "cycle id", "var": "cycle_id", "required": true}], "var_out": []}, "is_cycle_running": {"description": "get cycle running status", "editable": false, "group": "eva/cycle", "name": "is_cycle_running", "type": "built-in", "src": null, "var_in": [{"description": "cycle id", "var": "cycle_id", "required": true}], "var_out": []}, "alias": {"description": "create object alias", "editable": false, "group": "eva/general", "name": "alias", "type": "built-in", "src": null, "var_in": [{"description": "alias object", "var": "alias_obj", "required": true}, {"description": "source object", "var": "src_obj", "required": true}], "var_out": []}, "sleep": {"description": "pause operations", "editable": false, "group": "eva/general", "name": "sleep", "type": "built-in", "src": null, "var_in": [{"description": "number of seconds to sleep", "var": "t", "required": true}, {"description": "break on shutdown event (default is True)", "var": "safe", "required": false}], "var_out": []}}